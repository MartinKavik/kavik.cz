---
// Learn about using Astro layouts:
// https://docs.astro.build/en/core-concepts/layouts/

import Footer from '../components/Footer.astro';
// Component Imports
import MainHead from '../components/MainHead.astro';
import Nav from '../components/Nav.astro';

interface Props {
	title?: string | undefined;
	description?: string | undefined;
}

const { title, description } = Astro.props;
---

<html lang="en">
	<head>
		<MainHead title={title} description={description} />
	</head>
	<body>
		<div class="stack backgrounds">
			<div class="floating-bricks" aria-hidden="true">
				<div class="brick brick-1"></div>
				<div class="brick brick-2"></div>
				<div class="brick brick-3"></div>
				<div class="brick brick-4"></div>
				<div class="brick brick-5"></div>
				<div class="brick brick-6"></div>
				<div class="brick brick-7"></div>
				<div class="brick brick-8"></div>
			</div>
			<Nav />
			<slot />
			<Footer />
		</div>

		<script>
			// Add “loaded” class once the document has completely loaded.
			addEventListener('load', () => document.documentElement.classList.add('loaded'));
		</script>

		<style>
			:root {
				--_placeholder-bg: linear-gradient(transparent, transparent);
				--bg-image-main: url('/assets/backgrounds/bg-main-light-800w.jpg');
				--bg-image-main-curves: url('/assets/backgrounds/bg-main-light.svg');
				--bg-image-subtle-1: var(--_placeholder-bg);
				--bg-image-subtle-2: var(--_placeholder-bg);
				--bg-image-footer: var(--_placeholder-bg);
				--bg-svg-blend-mode: overlay;
				--bg-blend-mode: darken;
				--bg-image-aspect-ratio: 2.25;
				--bg-scale: 1.68;
				--bg-aspect-ratio: calc(var(--bg-image-aspect-ratio) / var(--bg-scale));
				--bg-gradient-size: calc(var(--bg-scale) * 100%);
			}

			:root.theme-dark {
				--bg-image-main: url('/assets/backgrounds/bg-main-dark-800w.jpg');
				--bg-image-main-curves: url('/assets/backgrounds/bg-main-dark.svg');
				--bg-svg-blend-mode: darken;
				--bg-blend-mode: lighten;
			}

			/* These backgrounds are displayed below the fold, so we lazy load them
			   once the `.loaded` class has been set.  */
			:root.loaded {
				--bg-image-subtle-1: url('/assets/backgrounds/bg-subtle-1-light-800w.jpg');
				--bg-image-subtle-2: url('/assets/backgrounds/bg-subtle-2-light-800w.jpg');
				--bg-image-footer: url('/assets/backgrounds/bg-footer-light-800w.jpg');
			}
			:root.loaded.theme-dark {
				--bg-image-subtle-1: url('/assets/backgrounds/bg-subtle-1-dark-800w.jpg');
				--bg-image-subtle-2: url('/assets/backgrounds/bg-subtle-2-dark-800w.jpg');
				--bg-image-footer: url('/assets/backgrounds/bg-footer-dark-800w.jpg');
			}

			@media (min-width: 50em) {
				:root {
					--bg-scale: 1;
					--bg-image-main: url('/assets/backgrounds/bg-main-light-1440w.jpg');
				}
				:root.theme-dark {
					--bg-image-main: url('/assets/backgrounds/bg-main-dark-1440w.jpg');
				}

				:root.loaded {
					--bg-image-subtle-1: url('/assets/backgrounds/bg-subtle-1-light-1440w.jpg');
					--bg-image-subtle-2: url('/assets/backgrounds/bg-subtle-2-light-1440w.jpg');
					--bg-image-footer: url('/assets/backgrounds/bg-footer-light-1440w.jpg');
				}
				:root.loaded.theme-dark {
					--bg-image-subtle-1: url('/assets/backgrounds/bg-subtle-1-dark-1440w.jpg');
					--bg-image-subtle-2: url('/assets/backgrounds/bg-subtle-2-dark-1440w.jpg');
					--bg-image-footer: url('/assets/backgrounds/bg-footer-dark-1440w.jpg');
				}
			}

			.backgrounds {
				min-height: 100%;
				isolation: isolate;
				background:
					/*grid*/
					var(--grid-pattern),
					/*base*/ var(--gray-999);
				background-size:
					/*grid*/ var(--grid-size) var(--grid-size),
					/*base*/ auto;
			}
			@media (forced-colors: active) {
				/* Deactivate custom backgrounds for high contrast users. */
				.backgrounds {
					background: none;
					background-blend-mode: none;
					--bg-gradient-size: none;
				}
			}

			/* Floating pixel bricks - small, animated */
			.floating-bricks {
				position: fixed;
				inset: 0;
				overflow: hidden;
				pointer-events: none;
				z-index: 1;
			}

			.brick {
				position: absolute;
				width: 12px;
				height: 12px;
				opacity: 0.12;
			}

			.brick-1 {
				background: #e63946;
				left: 5%;
				animation: float-up 25s linear infinite;
				animation-delay: -2s;
			}
			.brick-2 {
				background: #f4a261;
				left: 15%;
				animation: float-up 30s linear infinite;
				animation-delay: -8s;
			}
			.brick-3 {
				background: #e9c46a;
				left: 30%;
				animation: float-up 22s linear infinite;
				animation-delay: -5s;
			}
			.brick-4 {
				background: #2a9d8f;
				left: 45%;
				animation: float-up 28s linear infinite;
				animation-delay: -12s;
			}
			.brick-5 {
				background: #00b4d8;
				left: 60%;
				animation: float-up 26s linear infinite;
				animation-delay: -18s;
			}
			.brick-6 {
				background: #3a86ff;
				left: 75%;
				animation: float-up 32s linear infinite;
				animation-delay: -3s;
			}
			.brick-7 {
				background: #7209b7;
				left: 88%;
				animation: float-up 24s linear infinite;
				animation-delay: -15s;
			}
			.brick-8 {
				background: #f72585;
				left: 95%;
				animation: float-up 29s linear infinite;
				animation-delay: -22s;
			}

			@keyframes float-up {
				0% {
					transform: translateY(100vh) rotate(0deg);
				}
				100% {
					transform: translateY(-20vh) rotate(180deg);
				}
			}

			@media (prefers-reduced-motion: reduce) {
				.floating-bricks {
					display: none;
				}
			}

		</style>
	</body>
</html>
